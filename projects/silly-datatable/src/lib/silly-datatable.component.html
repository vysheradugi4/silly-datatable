<table [ngClass]="settingsService?.config?.tableClass">

    <tr [ngClass]="settingsService?.config?.headerRowClass">
        <th *ngFor="let column of columns"
            [ngClass]="column.headerClass">
            <ng-container *ngIf="column.sortable; else withoutSort">
                <a [ngClass]="settingsService?.config?.sortHeaderClass"
                    [class.asc]="currentSort?.columnName === column.id && currentSort?.order === 'asc'"
                    [class.desc]="currentSort?.columnName === column.id && currentSort?.order === 'desc'"
                    (click)="sortEnable(column.id)">
                    {{ column.title }}
                </a>
            </ng-container>

            <ng-template #withoutSort>
                {{ column.title }}
            </ng-template>
        </th>
    </tr>

    <ng-container *ngIf="source?.length; else withoutSource">
        <tr *ngFor="let row of source"
            [ngClass]="settingsService?.config?.rowClass">

            <ng-container *ngFor="let column of columns">
                <td *ngIf="!column.componentCell; else componentCell"
                    [ngClass]="column.cellClass"
                    (click)="clicked(row)"
                    (dblclick)="doubleClicked(row)">

                    <ng-container [ngSwitch]="true">
                        <ng-container *ngSwitchCase="!!column.prepareCellFunction">
                            {{ column.prepareCellFunction(row[column.id]) }}
                        </ng-container>

                        <ng-container *ngSwitchDefault>
                            {{ row[column.id] }}
                        </ng-container>
                    </ng-container>
                </td>

                <ng-template #componentCell>
                    <td [ngClass]="column.cellClass">
                        <ngx-component-cell [row]="row"
                            [component]="column.componentCell"
                            (componentCellEvent)="onComponentCellEvent($event)">
                        </ngx-component-cell>
                    </td>
                </ng-template>
            </ng-container>

        </tr>
    </ng-container>

    <ng-template #withoutSource>
        <tr>
            <td [attr.colspan]="columns?.length">
                {{ settingsService?.config?.dataNotFoundPhrase || 'Data not found' }}
            </td>
        </tr>
    </ng-template>

</table>

<div *ngIf="!source?.length">

</div>